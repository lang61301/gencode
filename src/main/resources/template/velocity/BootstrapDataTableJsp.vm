#parse("template/velocity/jspComponent.vm")
<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<% session.setAttribute("_ctx", request.getContextPath()); %>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title></title>

    <meta name="description" content="">
    <meta name="author" content="">

    <link href="${_ctx}/js/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="${_ctx}/js/bootstrapvalidator/css/bootstrapValidator.css" rel="stylesheet">
    <link href="${_ctx}/js/datatable/css/dataTables.bootstrap.min.css" rel="stylesheet">
    
    #*
    <link href="//cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://jspdd.applinzi.com/js/bootstrapvalidator/0.5.2/css/bootstrapValidator.css" rel="stylesheet">
    <link href="http://jspdd.applinzi.com/js/datatable/1.1/css/dataTables.bootstrap.min.css" rel="stylesheet">
    *#
    <style>
    .show-grid{margin-bottom:15px}
    .show-grid [class^=col-]{padding-top:10px;padding-bottom:10px;background-color:#eee;background-color:rgba(86,61,124,.15);border:1px solid #ddd;border:1px solid rgba(86,61,124,.2)}
    </style>
  </head>
  <body>
<div class="container-fluid">
#**
<div class="row show-grid">
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
</div>

<div class="row show-grid">
<div class="col-xs-1 col-sm-1">.col-xs-1 .col-sm-1</div>
<div class="col-xs-1 col-sm-1 col-sm-offset-1">.col-xs-2 .col-sm-2</div>

</div>
<div class="row show-grid">
<div class="col-xs-6 col-sm-3">.col-xs-6 .col-sm-3<br> i don't say a hello world! you are not a young boy! i am a young boy!</div>
<div class="col-xs-6 col-sm-3">.col-xs-6 .col-sm-3</div>

<!-- Add the extra clearfix for only the required viewport -->
<div class="clearfix visible-lg-block"></div>

<div class="col-xs-6 col-sm-3">.col-xs-6 .col-sm-3</div>
<div class="col-xs-6 col-sm-3">.col-xs-6 .col-sm-3</div>
</div>
*#
#if( ${table.queryFormRender.show} )
<div class="row">
	<div class="col-sm-12 col-md-12">
		<div class="panel panel-default">
		<div class="panel-heading">查询</div>
		<div class="panel-body">
	    	<div class="container-fluid">
			    <div class="row">
					<div class="col-md-12">
						<form class="form-horizontal" role="form">
						${table.queryFormRender.render}
						</form>
					</div>
				</div>
	      	</div>
		</div>
		<div class="panel-heading">
	    	<div class="row">
	    		<div class="col-lg-offset-10 col-lg-2">
	    			<a class="btn btn-primary" href="#" role="button">查询</a>
	    			<a class="btn btn-default" href="#" role="button">重置</a>
	    		</div>
	    	</div>
		</div>
		</div>
	</div>
</div>
#end
  <div class="row">
    <div class="col-sm-12 col-md-12 main">
    <div class="panel panel-default">
	  <!-- Default panel contents -->
	  <div class="panel-heading">
	  	   <div class="row">
	    		<div class="col-lg-2">
	    			<a class="btn btn-primary ${table.entityBeanName}new" href="#" role="button">新增</a>
	    			<a class="btn btn-primary ${table.entityBeanName}deleteall" href="#" role="button">删除</a>
	    		</div>
	    	</div>
	  </div>
        <table id="${jspDatatableId}" class="table table-striped table-bordered" style="margin-top:0px !important" width="100%" cellspacing="0">
		 <thead>
				 <tr>
				 #foreach( $column in $table.jspColumns)
					#if( ${column.listRender.show} )
						<th>${column.listRender.title}</th>
					#end
				#end
				 </tr>
			</thead>
		 <tbody>
		 </tbody>
		</table>
	 </div>
    </div>
  </div>
</div>

<div class="modal fade" id="${webActionEditMethodName}Modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">编辑</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
		    <div class="row">
				<div class="col-md-12">
					<form class="form-horizontal" role="form" action="${_ctx}${webActionRequestMapping}/${webActionEditMethodName}" method="post">
					#foreach( $column in $table.jspColumns)
						#if( ${column.editRender.show} )
							${column.editRender.render}
						#end
					#end
						#**<div class="form-group">
							<div class="col-sm-offset-2 col-sm-10">
								<div class="checkbox">
									<label>
										<input type="checkbox"> Remember me
									</label>
								</div>
							</div>
						</div>
						<div class="form-group">
							<div class="col-sm-offset-2 col-sm-10">
								 
								<button type="submit" class="btn btn-default">
									Sign in
								</button>
							</div>
						</div>**#
					</form>
				</div>
			</div>
      	</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary ${table.entityBeanName}save">保存</button>
      </div>
    </div>
  </div>
</div>
<script src="${_ctx}/js/jquery-2.1.4/jquery-2.1.4.min.js"></script>
<script src="${_ctx}/js/jquery/jquery.form.js"></script>
<script src="${_ctx}/js/jquery/jquery.blockUI.js"></script>
<script src="${_ctx}/js/bootstrap/js/bootstrap.min.js"></script>
<script src="${_ctx}/js/bootstrapvalidator/js/bootstrapValidator.min.js"></script>
<script src="${_ctx}/js/datatable/js/jquery.dataTables.min.js"></script>
<script src="${_ctx}/js/datatable/js/dataTables.bootstrap.js"></script>
<script src="${_ctx}/js/util2.js"></script>
<script src="${_ctx}/js/tables.js"></script>

#*
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
<script src="http://jspdd.applinzi.com/js/jquery/jquery.form.js"></script>
<script src="//cdn.bootcss.com/jquery.blockUI/2.70.0-2014.11.23/jquery.blockUI.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="http://jspdd.applinzi.com/js/bootstrapvalidator/0.5.2/js/bootstrapValidator.min.js"></script>
<script src="http://jspdd.applinzi.com/js/datatable/1.1/js/jquery.dataTables.min.js"></script>
<script src="http://jspdd.applinzi.com/js/datatable/1.1/js/dataTables.bootstrap.min.js"></script>
<script src="http://jspdd.applinzi.com/js/util.js"></script>
<script src="http://jspdd.applinzi.com/js/tables.js"></script>
*#
<script type="text/javascript">
$(document).ready(function(){
	/**
	 * datatables表格数据;
	 */
	var table = Tables.initTable($("#${jspDatatableId}"), {
		"processing":true,
		"serverSide": true,
		"createdRow": function ( row, data, index ) {
        },
        columns:[
        #datatable_columns($table.jspColumns)
        ]
        ,"ajax":{
			"url":"${_ctx}${webActionRequestMapping}/${queryPagingMethodPrefix}",
			"dataType": "json",
			"type":"post",
			"dataSrc":function(json){
				json.recordsTotal = json.data.total;
				json.recordsFiltered = json.data.total;
				
				var data = json["data"]["data"];
				return data;
			},
			"data":function(d){
				me.pdd.DataTable.plainfy_datatables(d);
			},
			"complete":function(d){
			}
			
		}
	});
	
	/**
	 * 全选事件;
	 */
	$("#${jspDatatableId}").on("click", ".${headGroupCheckboxClassName}", function(){
		var f = this.checked; 
		$(".${groupCheckboxClassName}").each(function(){
			this.checked = f;
		});
	});
	
	/**
	 * 编辑;
	 */
	$("#${jspDatatableId}").on("click", ".glyphicon-edit", function(){
		//var id = $(this).closest("tr").find(".${groupCheckboxClassName}").val();
		var row = $(this).closest("tr");
		var rowData = table.row(row).data();
		#ajax_pks_get_data(${table.columns} ${sqlMapMarkUse})
		
		$.blockUI({"baseZ":2001,
			"message":"",
			"css":{border:		'',
				backgroundColor:''}});
		$.ajax("${_ctx}${webActionRequestMapping}/${getMethodPrefix}", 
			{"data":objData, type:"get",
			dataType:"json", success:function(d){
				if(d.status == 0){
					var o = d.data;
					me.pdd.Form.setForm($("#${webActionEditMethodName}Modal .form-horizontal"), o);
					$('#${webActionEditMethodName}Modal').modal({
			   		  keyboard: false
			   		});
				}else{
					alert(d.msg);
				}
			}, complete:function(){$.unblockUI();}});
	});
	
	/**
	 * 单个删除;
	 */
	$("#${jspDatatableId}").on("click", ".glyphicon-remove-circle", function(){
		if(confirm("确定要删除吗?")){
			var row = $(this).closest("tr");
			var rowData = table.row(row).data();
			#ajax_pks_get_data(${table.columns} ${sqlMapMarkUse})
			$.blockUI({"baseZ":2001,
				"message":"<h2>删除中...</h2>",
				"css":{border:		'',
					backgroundColor:''}});
			$.ajax("${_ctx}${webActionRequestMapping}/${deleteMethodPrefix}", 
				{"data":objData, type:"get",
					dataType:"json", success:function(d){
						alert(d.msg);
						if(d.status == 0){
							table.ajax.reload();
						}
					}, complete:function(){   
						$.unblockUI();
					} 
				});
		}
	});
	
	/**
	 * 打开新增;
	 */
	$(".${table.entityBeanName}new").on("click", function(){
		//清空form;
		me.pdd.Form.clearForm($("#${webActionEditMethodName}Modal .form-horizontal"));
		$('#${webActionEditMethodName}Modal').modal({
   		  keyboard: false
   		});
	});
	
	/**
	 * 编辑保存;
	 */
	$(".${table.entityBeanName}save").on("click", function(){
		$.blockUI({"baseZ":2001,
			"message":"<h2>保存中...</h2>",
			"css":{border:		'',
				backgroundColor:''}});
		
		$("#${webActionEditMethodName}Modal .form-horizontal").ajaxSubmit(
			{	success:function(d){
					alert(d.msg);
					if(d.status == 0){
						table.ajax.reload();
					}
				},
				error:function(e){
				},
				complete:function(e){
					$('#${webActionEditMethodName}Modal').modal("hide");
					$.unblockUI();
				}
		});
	});
});
</script>
</body>
</html>


<!--	
#foreach( $column in $table.columns)
#if(${foreach.count} != 1),#end new ReportColumn("${column.propertyName}","",new ReportType[0],ReportColumn.RANGE_TYPE)
#end
-->